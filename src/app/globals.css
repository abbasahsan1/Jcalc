@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');

@layer base {
  * {
    @apply transition-colors duration-200;
  }

  body {
    font-family: 'Poppins', 'Inter', sans-serif;
    background-color: #FAF4EF;
    color: #2E2E2E;
  }

  html.dark body {
    background-color: #1C2230;
    color: #FAF4EF;
  }
}

@layer components {
  /* Desi Card Components */
  .desi-card {
    @apply bg-white rounded-lg shadow-lg border border-gold-200 p-6 relative overflow-hidden;
    background: linear-gradient(135deg, #ffffff 0%, #faf4ef 100%);
  }

  .desi-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #1C6E4A 0%, #C9A54B 50%, #F17E5D 100%);
  }

  .desi-card-header {
    @apply pb-4 mb-6 border-b border-gold-200 relative;
  }

  .desi-card-header::after {
    content: 'ðŸŽ‹';
    position: absolute;
    right: 0;
    top: 0;
    opacity: 0.3;
    font-size: 1.5rem;
  }

  /* Desi Form Elements */
  .form-field {
    @apply space-y-1 mb-2 relative;
  }
  
  .form-label {
    @apply block text-sm font-medium text-charcoal flex items-center gap-1;
  }
  
  .form-input {
    @apply w-full px-4 py-2 md:py-2 border-0 border-b-2 border-gold-300 rounded-t-md bg-cream-50
           focus:outline-none focus:border-primary-500 focus:bg-white
           transition-all duration-300 font-medium text-base md:text-sm 
           min-h-[44px] md:min-h-[38px];
  }

  .form-input:focus {
    box-shadow: 0 4px 6px -1px rgba(28, 110, 74, 0.1);
  }
  
  .form-select {
    @apply w-full px-4 py-2 md:py-2 border-0 border-b-2 border-gold-300 rounded-t-md bg-cream-50
           focus:outline-none focus:border-primary-500 focus:bg-white
           transition-all duration-300 cursor-pointer font-medium text-base md:text-sm
           min-h-[44px] md:min-h-[38px];
  }

  .form-select:focus {
    box-shadow: 0 4px 6px -1px rgba(28, 110, 74, 0.1);
  }
  
  /* Desi Button Styles */
  .btn-primary {
    @apply px-8 py-3 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg
           hover:from-primary-600 hover:to-primary-700 focus:outline-none focus:ring-4 focus:ring-primary-200
           transition-all duration-300 transform hover:scale-105 relative overflow-hidden;
    background-size: 200% 100%;
  }

  .btn-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
  }

  .btn-primary:hover::before {
    left: 100%;
  }
  
  .btn-outline {
    @apply px-8 py-3 bg-white border-2 border-gold-400 text-gold-600 font-semibold rounded-lg
           hover:bg-gold-50 hover:border-gold-500 focus:outline-none focus:ring-4 focus:ring-gold-200
           transition-all duration-300 transform hover:scale-105;
  }

  .btn-coral {
    @apply px-8 py-3 bg-gradient-to-r from-coral-500 to-coral-600 text-white font-semibold rounded-lg
           hover:from-coral-600 hover:to-coral-700 focus:outline-none focus:ring-4 focus:ring-coral-200
           transition-all duration-300 transform hover:scale-105;
  }

  /* Typography with Desi Flair */
  .page-title {
    @apply text-3xl font-bold text-charcoal relative;
    background: linear-gradient(135deg, #1C6E4A, #C9A54B);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
}

  .section-title {
    @apply text-xl font-semibold text-charcoal flex items-center gap-2;
  }

  .urdu-text {
    font-family: 'Noto Nastaliq Urdu', serif;
    @apply text-primary-600 font-medium;
  }

  /* Desi Results Cards */
  .result-card {
    @apply bg-white rounded-xl border-2 shadow-lg hover:shadow-xl transition-all duration-300 
           transform hover:scale-105 relative overflow-hidden;
  }

  .result-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 6px;
  }

  .result-card-minimum {
    @apply border-green-300;
  }

  .result-card-minimum::before {
    background: linear-gradient(90deg, #10b981, #059669);
  }

  .result-card-average {
    @apply border-blue-400;
  }

  .result-card-average::before {
    background: linear-gradient(90deg, #3b82f6, #2563eb);
  }

  .result-card-maximum {
    @apply border-purple-400;
  }

  .result-card-maximum::before {
    background: linear-gradient(90deg, #a855f7, #9333ea);
  }

  /* Desi Header */
  .desi-header {
    @apply bg-white border-b-2 border-gold-200 shadow-md relative;
    background: linear-gradient(135deg, #ffffff 0%, #faf4ef 100%);
  }

  .desi-header::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, #1C6E4A 0%, #C9A54B 50%, #F17E5D 100%);
  }

  /* Desi Stepper */
  .desi-stepper {
    @apply bg-white rounded-xl shadow-md border border-gold-200 p-6 mb-6 relative overflow-hidden;
    background: linear-gradient(135deg, #ffffff 0%, #faf4ef 100%);
  }

  .desi-stepper::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #1C6E4A 0%, #C9A54B 100%);
  }

  /* Cultural Popup Styles */
  .cultural-popup {
    @apply fixed top-4 right-4 bg-gradient-to-r from-gold-400 to-coral-400 text-white p-4 rounded-lg shadow-xl
           border-2 border-white transform transition-all duration-500 z-50;
    animation: slideIn 0.5s ease-out, fadeOut 0.5s ease-in 2.5s forwards;
  }

  @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }

  @keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; transform: translateX(100%); }
  }

  /* Input Icons - Fixed positioning to prevent overlap */
  .input-with-icon {
    @apply relative;
  }

  .input-with-icon input,
  .input-with-icon select {
    @apply pl-12 pr-4;
  }

  .input-icon {
    @apply absolute left-4 top-1/2 transform -translate-y-1/2 text-gold-500 pointer-events-none z-10;
    width: 16px;
    height: 16px;
  }

  /* CRITICAL: iPhone Safari/WebKit fixes for select fields */
  @supports (-webkit-touch-callout: none) {
    .input-with-icon select {
      padding-left: 56px !important;
    }
    .input-with-icon select + .input-icon {
      left: 14px !important;
    }
  }

  /* CRITICAL: Additional iPhone-specific media query fix */
  @media only screen and (max-width: 430px) and (-webkit-min-device-pixel-ratio: 2) {
    .input-with-icon select {
      padding-left: 56px !important;
      padding-right: 32px !important;
    }
    .input-with-icon select + .input-icon {
      left: 14px !important;
      transform: translateY(-50%) scale(0.95) !important;
    }
  }

  /* CRITICAL: iOS Safari specific fix for text rendering and select styling */
  @media screen and (-webkit-min-device-pixel-ratio: 0) {
    .input-with-icon select {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      padding-left: 56px !important;
      background-position: right 12px center !important;
    }
  }

  /* Mobile optimizations */
  @media (max-width: 768px) {
    .desi-card {
      @apply p-2 mx-1 mb-2;
    }
    .desi-card-header {
      @apply pb-2 mb-3;
    }
    .form-input,
    .form-select {
      @apply px-3 py-2 text-base min-h-[44px] rounded-lg;
    }
    .input-with-icon input,
    .input-with-icon select {
      @apply pl-12 pr-4;
    }
    .input-with-icon select {
      padding-left: 56px !important;
      padding-right: 32px !important;
    }
    .input-icon {
      @apply left-4;
      width: 16px;
      height: 16px;
    }
    .btn-primary,
    .btn-outline,
    .btn-coral {
      @apply px-4 py-2 text-base min-h-[44px] rounded-lg;
    }
    .section-title {
      @apply text-base leading-tight;
    }
    .form-field {
      @apply space-y-1 mb-2;
    }
    .form-label {
      @apply text-xs font-medium mb-1;
    }
    .container {
      @apply px-2;
    }
    /* Better mobile spacing */
    .space-y-6 > * + *,
    .md\:space-y-8 > * + * {
      @apply mt-2;
    }
    .space-y-4 > * + * {
      @apply mt-1;
    }
  }

  @media (max-width: 640px) {
    .container {
      @apply px-2;
    }
    
    .cultural-popup {
      @apply top-2 right-2 left-2 text-sm p-3;
    }
  }

  /* Animated Elements */
  .bounce-gentle {
    animation: bounce-gentle 2s infinite;
  }

  @keyframes bounce-gentle {
    0%, 20%, 53%, 80%, 100% { transform: translateY(0); }
    40%, 43% { transform: translateY(-8px); }
    70% { transform: translateY(-4px); }
  }

  /* Dark mode adjustments */
  html.dark .desi-card {
    @apply bg-midnight-800 border-gold-600;
    background: linear-gradient(135deg, #1C2230 0%, #2a3441 100%);
  }

  html.dark .form-input,
  html.dark .form-select {
    @apply bg-midnight-700 border-gold-400 text-cream-100;
  }

  html.dark .page-title {
    background: linear-gradient(135deg, #4ade80, #facc15);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
